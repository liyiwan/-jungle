<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC  
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"  
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
	<sql-query name="GoodsToCheck">
		<![CDATA[
			SELECT Goods.GoodsID AS GoodsId, 
			       Goods.GoodsNO AS GoodsNo, 
			       Goods.GoodsName AS GoodsName, 
			       Goods.FlagID AS FlagId, 
			       Goods.bMultiSpec AS MultiSpec,
			       SUM(G_Stock_Spec.Stock) AS Stock
			FROM   G_Goods_GoodsList Goods 
			       LEFT JOIN J_MyGoods MyGoods ON MyGoods.GoodsId = Goods.GoodsID
			       LEFT JOIN G_Stock_Spec ON G_Stock_Spec.GoodsID = Goods.GoodsID
			WHERE  MyGoods.CheckDate IS NULL OR datediff(hh,MyGoods.CheckDate,GETDATE()) > 24 
			GROUP BY Goods.GoodsID,Goods.GoodsNO,Goods.GoodsName,Goods.FlagID,Goods.bMultiSpec
		]]>
	</sql-query>
	<sql-query name="NotOnSaleGoods">
		<![CDATA[
			SELECT G_Goods_GoodsList.GoodsID AS GoodsId,G_Goods_GoodsList.GoodsNO AS GoodsNo,G_Goods_GoodsList.GoodsName AS GoodsName
			FROM G_Goods_GoodsList LEFT JOIN J_MyGoods ON G_Goods_GoodsList.GoodsID=J_MyGoods.GoodsID
			WHERE J_MyGoods.PicPath IS NULL OR J_MyGoods.PicPath = ''
		]]>
	</sql-query>

</hibernate-mapping>
